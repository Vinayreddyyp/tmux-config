set -g default-terminal "tmux-256color"
set -g xterm-keys on
set -g mouse on
set -g status-position top

##### IMPORTANT (macOS Terminal/iTerm) #####
# Allow Ctrl+s to be used (disable terminal flow control)
# Also run once in your shell:  stty -ixon
set -g -q @disable-flow-control yes

##### WINDOW / TAB BEHAVIOR (0,1,2...) + PATH NAMES #####
set -g base-index 0
setw -g pane-base-index 0
set -g renumber-windows on

# Stop hostname / app renaming
set -g allow-rename off

# Auto-name windows by current directory
setw -g automatic-rename on
setw -g automatic-rename-format "#{=/-30/...:pane_current_path}"

##### CATPPUCCIN THEME #####
set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"

# Tab text (index + path)
set -g @catppuccin_window_text " #I #{=/-30/...:pane_current_path} "
set -g @catppuccin_window_current_text " #I #{=/-30/...:pane_current_path} "

##### WINDOW NAVIGATION (TABS) #####
bind -n C-h previous-window
bind -n C-l next-window
bind -n C-w choose-window

##### NEW TAB #####
# Ctrl + t â†’ open new tab (tmux window)
bind -n C-t new-window

##### PANE NAVIGATION (SPLITS) â€” OPTION + H J K L #####
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

##### PANE NAVIGATION (SPLITS) â€” Ctrl + n #####
# Cycle through split panes in the current window
bind -n C-n select-pane -t :.+
# Optional reverse
# bind -n C-p select-pane -t :.-

##### SPLIT CREATION #####
# Ctrl + v â†’ split vertically (top/bottom)
bind -n C-v split-window -v

# Ctrl + s â†’ split horizontally (left/right)
bind -n C-s split-window -h

##### FULL SCREEN / ZOOM #####
# Ctrl + z â†’ toggle full screen for current pane
bind -n C-z resize-pane -Z

##### CLOSE CURRENT SPLIT #####
# Ctrl + x â†’ close (kill) current pane
bind -n C-x kill-pane

##### SMART NAVIGATION (CTRL + ARROWS) #####
bind -n C-Left  if-shell -F "#{pane_at_left}"   "select-pane -L" "previous-window"
bind -n C-Right if-shell -F "#{pane_at_right}"  "select-pane -R" "next-window"
bind -n C-Up    if-shell -F "#{pane_at_top}"    "select-pane -U" "previous-window"
bind -n C-Down  if-shell -F "#{pane_at_bottom}" "select-pane -D" "next-window"

##### COPY MODE #####
setw -g mode-keys vi

##### LOAD CATPPUCCIN #####
run ~/.config/tmux/plugins/catppuccin/tmux/catppuccin.tmux

##### ðŸ”´ ACTIVE TAB HIGHLIGHT #####
set -g window-status-format "#[fg=#cdd6f4,bg=default] #I #{=/-30/...:pane_current_path} "
set -g window-status-current-format "#[fg=#1e1e2e,bg=#f38ba8,bold] #I #{=/-30/...:pane_current_path} #[default]"

##### STATUS LINE #####
set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""

set -g status-right "#{E:@catppuccin_status_application}"
set -agF status-right "#{E:@catppuccin_status_cpu}"
set -ag status-right "#{E:@catppuccin_status_session}"
set -ag status-right "#{E:@catppuccin_status_uptime}"
set -agF status-right "#{E:@catppuccin_status_battery}"

##### CPU & BATTERY #####
run ~/.config/tmux/plugins/tmux-plugins/tmux-cpu/cpu.tmux
run ~/.config/tmux/plugins/tmux-plugins/tmux-battery/battery.tmux

##### RELOAD CONFIG #####
bind r source-file ~/.tmux.conf \; display-message "ðŸŒ¸ tmux reloaded"

##### TPM (KEEP LAST) #####
run '~/.tmux/plugins/tpm/tpm'
