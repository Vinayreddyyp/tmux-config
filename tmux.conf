##### GENERAL #####
set -g default-terminal "tmux-256color"
set -g xterm-keys on
set -g mouse on
set -g status-position top

##### WINDOW / TAB BEHAVIOR (0,1,2...) + PATH NAMES #####
# Start windows at 0 and always keep them numbered nicely
set -g base-index 0
setw -g pane-base-index 0
set -g renumber-windows on

# Prevent apps (ssh, vim, shells, etc.) from renaming windows to hostname
set -g allow-rename off

# Rename each window automatically based on the active pane's current folder
setw -g automatic-rename on
# Full path (trim to last 30 chars and show "..." if too long)
setw -g automatic-rename-format "#{=/-30/...:pane_current_path}"

##### CATPPUCCIN THEME #####
set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"

# Make tab text show: index + path
set -g @catppuccin_window_text " #I #{=/-30/...:pane_current_path} "
set -g @catppuccin_window_current_text " #I #{=/-30/...:pane_current_path} "

##### TMUX WINDOW NAVIGATION (TABS) #####
# No prefix required
bind-key -n C-h previous-window
bind-key -n C-l next-window

# Optional alternatives
bind-key -n C-j next-window
bind-key -n C-k previous-window

# Visual window picker
bind-key -n C-w choose-window

##### TMUX PANE NAVIGATION (SPLITS) #####
# Alt / Option + Arrow keys
bind-key -n M-Left  select-pane -L
bind-key -n M-Right select-pane -R
bind-key -n M-Up    select-pane -U
bind-key -n M-Down  select-pane -D

# Fullscreen / zoom pane
bind-key -n M-z resize-pane -Z

##### COPY MODE #####
setw -g mode-keys vi

##### LOAD CATPPUCCIN #####
run ~/.config/tmux/plugins/catppuccin/tmux/catppuccin.tmux

##### STATUS LINE #####
set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""

set -g status-right "#{E:@catppuccin_status_application}"
set -agF status-right "#{E:@catppuccin_status_cpu}"
set -ag status-right "#{E:@catppuccin_status_session}"
set -ag status-right "#{E:@catppuccin_status_uptime}"
set -agF status-right "#{E:@catppuccin_status_battery}"

##### CPU & BATTERY #####
run ~/.config/tmux/plugins/tmux-plugins/tmux-cpu/cpu.tmux
run ~/.config/tmux/plugins/tmux-plugins/tmux-battery/battery.tmux

##### RELOAD CONFIG #####
bind r source-file ~/.tmux.conf \; display-message "ðŸŒ¸ tmux reloaded"

##### TPM (KEEP LAST) #####
run '~/.tmux/plugins/tpm/tpm'

